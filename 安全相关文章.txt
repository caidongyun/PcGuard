http://www.xfocus.net/articles/200512/841.html

关于杀毒就比较有趣了。其中的内容非常丰富，因为计算机病毒一直与杀毒软件相较量，而且两者的技术共同进化着。
      我所了解的知识比较多，而由于你的软件时间有限，所以我分轻重来讲。
      其实你的问题分为两个方面：“查病毒”和“杀病毒”。一般杀毒软件的权限可以很高，病毒的行为也比较固定，杀病毒对于现实中的杀毒软件来说比较容易。而由于不断出现新型病毒，所以查病毒才是考验病毒软件的功力。但是，你自己的软件能够实现查出有限的几个病毒来就基本可以，所以查病毒的功能还是很简单的，而且你的软件至少要有这个功能（杀病毒可以从简）。
    先说一下病毒是什么吧，病毒就是恶意的程序。通俗点说在windows下，病毒就是一个exe文件（其实高级病毒并非如此）
。但这个程序有恶意行为，比如开机后自启动、获取用户输入信息、将信息上传到网络等。杀毒软件就是要将这个文件识别出来，除掉。
    先说查毒又基本分两种，一种是基于特征码的，一种是基于行为的。下面两段分别来讲。
    特征码，就是在病毒样本中，提取出一串字符串，成为这个病毒的识别标志。比如，若以“4D 5A”（这里都是16进制）开头的文件，我可以判断它为可执行文件（转换为字母就是“MZ”）。而根据样本，举例包含“87705C7B85A02F0A”的，就是灰鸽子病毒。算法设计一下，更快速的方法是将偏移量加入，上例成为：偏移量“1A836F”处为“87705C7B85A02F0A”的，就是灰鸽子病毒。这样算法基本成型。
    这里就要讲特征码的获取。首先是要有病毒样本，也就是把病毒“逮着了”，然后进行分析，提取特征码，这里注意特征码既要准确标志病毒，又不能跟其他文件冲突，否则就会产生误杀。比如上例中，若出现失误，结果windows系统中某文件的那个偏移量中也有相同的字符串，那么系统文件也会一并被删掉。
    特征码查毒的缺点显而易见，只有先有了具体的病毒，才能被查杀，而且若特征码信息泄露，那么修改特征码就可以免查杀。然后发展为通过行为来判断病毒，有的杀毒软件成为“主动防御”。将目标文件（可执行文件）进行静态分析，看有没有可疑的函数。进一步可以讲目标文件在虚拟机中执行，动态分析其行为是什么。比如出现在敏感处写注册表信息、在系统目录下生成文件、用HOOK函数获取用户输入等，那么此文件就可能是病毒，就要进行预警、防范、上报。
    以上是“查毒”，再来说一说“杀毒”。
    杀毒的方法其实就是病毒感染的逆行为。也就是病毒怎么修改的系统，杀毒软件要负责怎么还原回去。从系统级来说，病毒的行为主要有：文件、进程、注册表。三个方面。一般来说，查毒时都是从文件入手的，也就是在硬盘上扫描病毒。典型的病毒感染行为：病毒被执行创建了进程――病毒将自身拷贝到系统目录下一份――病毒修改注册表实现开机自启动。然后开机时的行为：系统从注册表读入配置信息――启动系统目录下的病毒――病毒有了进程开始恶意行为（如窃取密码）。
    杀毒时，首先要做的，就是结束病毒的进程。因为有进程时，文件被系统保护不能够删除，而将注册表改回后病毒可能再次写入信息。没有了进程，病毒文件就只是一个文件，可以任意处置。
    以我编写的“矿大病毒专杀工具”来说，运行流程是：选择扫描目标――开始扫描硬盘――按照特征码识别出病毒文件――查找病毒进程――结束病毒进程――删除病毒文件――删除病毒启动设置――其余清理。
    以上是关于杀毒软件的知识。再来聊一聊具体软件的编写。
    我认为你的杀毒软件一期需要实现以下功能：能够识别特定的一些病毒，并将文件删除。也就是说实现特征码查毒，和最简单的杀毒。
    这里的核心在于特征码库的构建，作为小软件并不用考虑杀毒数量多少的问题，能够查杀2个病毒和2万个病毒功能上差别不大。所以特征码库不要求大，但要有良好的结构。这个结构要求有足够的信息量。什么病毒，特征码在哪里，是什么。这些是基本信息。有扩展性更好，比如后续可能增加的具体查杀方法等。要能增加数据，也就是实现良好的结构，使其能够存放无限多的特征码。
    这是对你软件的期望。到此为止了。
    注明以上内容只是杀毒的基本知识，并不严谨。比如说“病毒是exe文件”，其实很多病毒不以这种形式出现，引导区病毒甚至没有常规意义上的文件。比如以上说病毒行为有三个方面，其实各种病毒不同花样百出，还有注册驱动、修改配置文件等。有Rootkit技术的病毒甚至通过一般方法无法看到文件、进程、注册表信息、端口等。但对于刚开始学习这方面知识的来说，这样理解应该没问题，后续可以慢慢深入。
    具体实现还是多靠搜索引擎。其实杀毒内容丰富，搞好后有很多乐趣的。
    我当时分析的矿大病毒的行为： http://blog.sina.com.cn/s/blog_5e6bf8bf0100fca3.html 你可以看一下，除了没有修改注册表，这个病毒还是比较简单和典型的。
